apiVersion: v1
kind: ConfigMap
metadata:
  name: discourse-env
  namespace: discourse
data:
  # Database connection
  DISCOURSE_DB_HOST: "discourse-pg-rw.discourse.svc"
  DISCOURSE_DB_PORT: "5432"
  DISCOURSE_DB_NAME: "discourse"
  DISCOURSE_DB_USERNAME: "discourse"

  # Redis/Valkey connection
  DISCOURSE_REDIS_HOST: "valkey.discourse.svc"
  DISCOURSE_REDIS_PORT: "6379"

  # Discourse settings
  DISCOURSE_HOSTNAME: "forum.example.com"
  DISCOURSE_DEVELOPER_EMAILS: "admin@example.com"

  # SMTP settings
  DISCOURSE_SMTP_ADDRESS: "smtp.example.com"
  DISCOURSE_SMTP_PORT: "587"
  DISCOURSE_SMTP_USER_NAME: "postmaster@example.com"

  # Boot behavior - disabled by default for multi-replica safety
  # Enable in single-pod overlay or use migration Job instead
  MIGRATE_ON_BOOT: "0"
  PRECOMPILE_ON_BOOT: "0"

  # Ember CLI already compiled during image build
  SKIP_EMBER_CLI_COMPILE: "1"

  # Locale
  LANG: "en_US.UTF-8"
